
{% extends "../../base.html" %}
{% load static %}
{% block extra_title %}User Dashboard{% endblock %}
{% block content %}

<div class="container" style="max-width: 1000px">
        <div class="col-12">
        <h1 class="h2">Your Account Dashboard</h1>
        </div>
        <div class="col-12 d-flex justify-content-between">
        <div>Manage your <b>profile</b> settings</div>
        </div>
        <hr />
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-2 g-2 pt-2">
        <!-- Orders Card-->
        <div class="col">
            <a href="{% url "account:dashboard" %}" class="text-reset text-decoration-none" role="button" style="max-width: 540px;">
            <div id="ordersCard" class="card mb-3">
            <div class="row g-0">
                <div class="col-2 position-relative">
                    <i class="fa-solid fa-gift position-absolute top-50 start-50 translate-middle" style="font-size: 25px;"></i>
                </div>
                <div class="col-10">
                <div class="card-body ps-0 ps-md-1">
                    <h1 class="h5">Your Orders</h1>
                    <p class="card-text small text-muted">View or change your orders</p>
                </div>
                </div>
            </div>
            </div>
            </a>
        </div>
        <!-- Profile Card-->
        <div class="col">
            <a href="{% url "account:edit_details" %}" class="text-reset text-decoration-none" role="button" style="max-width: 540px;">
            <div id="profileCard" class="card mb-3">
            <div class="row g-0">
                <div class="col-2 position-relative">
                    <i class="fa-solid fa-user position-absolute top-50 start-50 translate-middle" style="font-size: 25px;"></i>
                </div>
                <div class="col-10">
                <div class="card-body ps-0 ps-md-1">
                    <h1 class="h5">Your Profile</h1>
                    <p class="card-text small text-muted">Edit or delete your account details</p>
                </div>
                </div>
            </div>
            </div>
            </a>
        </div>
        <!-- Address Card-->
        <div class="col">
            <a href="{% url "account:addresses" %}" class="text-reset text-decoration-none" role="button" style="max-width: 540px;">
            <div id="addressesCard" class="card mb-3">
            <div class="row g-0">
                <div class="col-2 position-relative">
                    <i class="fa-solid fa-truck position-absolute top-50 start-50 translate-middle" style="font-size: 25px;"></i>
                </div>
                <div class="col-10">
                <div class="card-body ps-0 ps-md-1">
                    <h1 class="h5">Your Addresses</h1>
                    <p class="card-text small text-muted">Edit your shipping addresses</p>
                </div>
                </div>
            </div>
            </div>
            </a>
        </div>
        <!-- Wishlist Card-->
        <div class="col">
            <a href="{% url "account:wishlist" %}" class="text-reset text-decoration-none" role="button" style="max-width: 540px;">
            <div id="wishlistCard" class="card mb-3">
            <div class="row g-0">
                <div class="col-2 position-relative">
                <i class="fa-solid fa-heart position-absolute top-50 start-50 translate-middle" style="font-size: 25px;"></i>
                </div>
                <div class="col-10">
                <div class="card-body ps-0 ps-md-1">
                    <h1 class="h5">Your Wishlist</h1>
                    <p class="card-text small text-muted">View your wishlist</p>
                </div>
                </div>
            </div>
            </div>
            </a>
        </div>
</div>
<!-- Profile -->
<div class="container px-0 pt-2">
    <div class="card mb-3 rounded-2 p-3">
        <form class="account-form" method="post" enctype="multipart/form-data">
            <div class="row justify-content-between gap-2">
                <div class="d-flex flex-column justify-content-start col-12 col-md-6">
                    {% if user_form.is_valid and profile_form.is_valid  %}
                    <p class="small text-center pt-0">
                        <a href="{% url "account:dashboard" %}">Back to Dashboard</a>
                    </p>
                    {%else%}
                    <p class=" h3 font-weight-bold">Edit Account</p>
                    {% endif %}

                    {% csrf_token %}
                    <label class="small fw-bold">{{ user_form.email.label}}</label>
                    {{ user_form.email }}
                    <label class="small fw-bold">{{ user_form.name.label}}</label>
                    {{ user_form.name }}
                    <label class="small fw-bold" for="id_profile_image">Profile Image</label>
                    <div class="mb-3">
                        {% if user.profile_image %}
                        <img src="{{ user.profile_image.url }}" alt="Profile Image" class="img-thumbnail" style="max-width: 200px;">
                        <br>
                        <div class="form-check pt-2">
                            <input class="form-check-input" type="checkbox" id="clear-image-checkbox" name="clear_image">
                            <label class="form-check-label" for="clear-image-checkbox">Remove Image</label>
                        </div>
                        {% else %}
                        <img src="{% static 'images/default_profile.png' %}" alt="Default Image" class="img-thumbnail" style="max-width: 200px;">
                        {% endif %}
                    </div>
                    <div class="input-group pt-0">
                        <span id="file-name" class="pt-2"></span>
                        <input type="file" class="form-control visually-hidden" id="id_profile_image" name="profile_image" accept="image/*"  onchange="displayFileName(this)">
                        <label class="btn btn-secondary rounded-2 col-12" for="id_profile_image">Choose File</label>
                    </div>
                </div> 
                <div class="d-flex flex-column justify-content-end col-12 col-md-5">
                    <button class="btn btn-primary col-12" type="submit" value="Save changes">
                        Save Changes
                    </button>
                </div>
            </div>
        </form>
    </div>    
    <div class="card mb-3 rounded-2 p-3">
        <form class="account-form" action="{% url "account:delete_user" %}" method="post">
            {% csrf_token %}
            <div class="row justify-content-between gap-2">
                <div class="d-flex flex-column justify-content-start col-12 col-md-6">
                    <p class=" h3 font-weight-bold">Delete Account</p>
                    <span>Are you sure you want to delete your account?</span>
                </div> 
                <div class="d-flex flex-column justify-content-end col-12 col-md-5">
                    <button type="submit" role="button" class="btn btn-danger col-12">
                        Delete
                    </button>
                </div>
            </div>
        </form>
    </div>
    <div class="card mb-3 rounded-2 p-3">
        {% if is_subscribed %}
        <form action="{% url 'newsletter:unsubscribe_newsletter' %}" method="post">
            {% csrf_token %}
            <div class="row justify-content-between gap-2">
                <div class="d-flex flex-column justify-content-start col-12 col-md-6">
                    <p class=" h3 font-weight-bold">Newsletter</p>
                    <span>You are currently signed up for our Newsletter.</span>
                </div> 
                <div class="d-flex flex-column justify-content-end col-12 col-md-5">
                    <a href="{% url 'newsletter:unsubscribe_newsletter' %}" class="btn btn-danger col-12">
                        Unsubscribe
                    </a>
                </div>
            </div>
        </form>
        {% else %}
        <form action="{% url 'newsletter:subscribe_newsletter' %}" method="post">
            {% csrf_token %}
            <div class="row justify-content-between gap-2">
                <div class="d-flex flex-column justify-content-start col-12 col-md-6">
                    <p class="h3 font-weight-bold">Newsletter</p>
                    <span>Do you wish to subscribe to our Newsletter?</span>
                </div> 
                <div class="d-flex flex-column justify-content-end col-12 col-md-5">
                    <a href="{% url 'newsletter:subscribe_newsletter' %}" class="btn btn-primary col-12">
                        Subscribe
                    </a>
                </div>
            </div>    
        </form>
        {% endif %}
    </div> 
</div>
            
{% endblock %}