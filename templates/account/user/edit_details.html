
{% extends "../../base.html" %}
{% load static %}
{% block title %}User Dashboard{% endblock %}
{% block content %}

<div class="container" style="max-width: 1000px">
        <div class="col-12">
        <h1 class="h2">Your Account Dashboard</h1>
        </div>
        <div class="col-12 d-flex justify-content-between">
        <div>Manage your <b>profile</b> settings</div>
        </div>
        <hr />
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-2 g-2 pt-2">
        <!-- Orders Card-->
        <div class="col">
            <a href="{% url "account:dashboard" %}" class="text-reset text-decoration-none" role="button" style="max-width: 540px;">
            <div id="ordersCard" class="card mb-3">
            <div class="row g-0">
                <div class="col-2 position-relative">
                    <i class="fa-solid fa-gift position-absolute top-50 start-50 translate-middle" style="font-size: 25px;"></i>
                </div>
                <div class="col-10">
                <div class="card-body ps-0 ps-md-1">
                    <h1 class="h5">Your Orders</h1>
                    <p class="card-text small text-muted">View or change your orders</p>
                </div>
                </div>
            </div>
            </div>
            </a>
        </div>
        <!-- Profile Card-->
        <div class="col">
            <a href="{% url "account:edit_details" %}" class="text-reset text-decoration-none" role="button" style="max-width: 540px;">
            <div id="profileCard" class="card mb-3">
            <div class="row g-0">
                <div class="col-2 position-relative">
                    <i class="fa-solid fa-user position-absolute top-50 start-50 translate-middle" style="font-size: 25px;"></i>
                </div>
                <div class="col-10">
                <div class="card-body ps-0 ps-md-1">
                    <h1 class="h5">Your Profile</h1>
                    <p class="card-text small text-muted">Edit or delete your account details</p>
                </div>
                </div>
            </div>
            </div>
            </a>
        </div>
        <!-- Address Card-->
        <div class="col">
            <a href="{% url "account:addresses" %}" class="text-reset text-decoration-none" role="button" style="max-width: 540px;">
            <div id="addressesCard" class="card mb-3">
            <div class="row g-0">
                <div class="col-2 position-relative">
                    <i class="fa-solid fa-truck position-absolute top-50 start-50 translate-middle" style="font-size: 25px;"></i>
                </div>
                <div class="col-10">
                <div class="card-body ps-0 ps-md-1">
                    <h1 class="h5">Your Addresses</h1>
                    <p class="card-text small text-muted">Edit your shipping addresses</p>
                </div>
                </div>
            </div>
            </div>
            </a>
        </div>
        <!-- Wishlist Card-->
        <div class="col">
            <a href="{% url "account:wishlist" %}" class="text-reset text-decoration-none" role="button" style="max-width: 540px;">
            <div id="wishlistCard" class="card mb-3">
            <div class="row g-0">
                <div class="col-2 position-relative">
                <i class="fa-solid fa-heart position-absolute top-50 start-50 translate-middle" style="font-size: 25px;"></i>
                </div>
                <div class="col-10">
                <div class="card-body ps-0 ps-md-1">
                    <h1 class="h5">Your Wishlist</h1>
                    <p class="card-text small text-muted">View your wishlist</p>
                </div>
                </div>
            </div>
            </div>
            </a>
        </div>
</div>
<!-- Profile -->
<div class="col-6 mx-auto py-2 login">
    <form class="account-form" method="post" enctype="multipart/form-data">
        {% if user_form.is_valid and profile_form.is_valid  %}
        <div class="alert alert-primary" role="alert">
            Details successfully updated!
        </div>
        <p class="small text-center pt-0">
            <a href="{% url "account:dashboard" %}">Back to Dashboard</a>
        </p>
        {%else%}
        <p>You can edit your account using the following form:</p>
        {% endif %}

        {% if form.errors %}
        <div class="alert alert-primary" role="alert">
            Error: Please try again!
        </div>
        {% endif %}

        {% csrf_token %}
        <label class="small font-weight-bold">{{ user_form.email.label}}</label>
        {{ user_form.email }}
        <label class="small font-weight-bold">{{ user_form.name.label}}</label>
        {{ user_form.name }}
        <label class="small font-weight-bold" for="id_profile_image">Profile Image</label>
        <div class="mb-3">
            {% if user.profile_image %}
            <img src="{{ user.profile_image.url }}" alt="Profile Image" class="img-thumbnail" style="max-width: 200px;">
            <br>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="clear-image-checkbox" name="clear_image">
                <label class="form-check-label" for="clear-image-checkbox">Remove Image</label>
            </div>
            {% else %}
            <img src="{% static 'images/default_profile.png' %}" alt="Default Image" class="img-thumbnail" style="max-width: 200px;">
            {% endif %}
        </div>
        <div class="input-group pb-2">
            <input type="file" class="form-control visually-hidden" id="id_profile_image" name="profile_image" accept="image/*"  onchange="displayFileName(this)">
            <label class="input-group-text" for="id_profile_image">Choose File</label>
        </div>
        <span id="file-name" class="pt-2"></span>

        <button class="w-100 btn btn-primary btn-block py-2 mb-4 mt-2 fw-bold" type="submit" value="Save changes">
            Save Changes
        </button>
        <hr class="mb-3">
    </form>
    <form class="account-form" action="{% url "account:delete_user" %}" method="post">
        {% csrf_token %}
        <p class=" h3 pt-4 font-weight-bold">Delete Account</p>
        <p>Are you sure you want to delete your account?</p>
            <button type="submit" role="button" class="w-100 btn btn-danger btn-block py-2 mt-2 fw-bold">
                Delete
            </button>
        </form>
</div>
            
{% endblock %}